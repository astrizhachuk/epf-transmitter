<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="gitlab, вебхук, webhook, интеграция, события, push, обработчик" />
<link rel="stylesheet" type="text/css" href="v8help://service_book/service_style"></link>
<title>Интеграция с GitLab</title>
</head>
<body>
<h1>Интеграция с GitLab</h1>
<p>Подсистема обеспечивает приём и обработку внешних запросов (webhook) из GitLab,
маршрутизацию и передачу файлов получателям, а также просмотр истории событий и
диагностику.</p>

<h2>Как начать работать</h2>
<ol>
	<li>Настройте веб-хуки в репозиториях GitLab, которые будут отправлять запросы. Подробнее см. <a href="#webhook_setup">ниже</a>.</li>
	<li>Откройте <a href="CommonForm.НастройкиСервисов/Help">настройки интеграции</a>, укажите глобальные параметры работы сервиса и включите обработку запросов.</li>
	<li>Создайте и настройте <a href="Catalog.ОбработчикиВнешнихЗапросов/Help">обработчики внешних запросов</a> для нужных проектов/репозиториев, указав для каждого секретный токен из веб-хука.</li>
</ol>

<h2 id="webhook_setup">Настройка веб-хуков в GitLab</h2>
<p>Для каждого репозитория, события из которого должен обрабатывать сервис-распределитель, необходимо настроить веб-хук (<em>Settings → Webhooks</em>). При настройке укажите следующие параметры:</p>
<ul>
	<li><b>URL</b> — адрес HTTP-сервиса 1С (endpoint), который принимает запросы. Например: <code>http://&lt;адрес_сервера&gt;/transmitter/hs/gitlab/event/</code>.</li>
	<li><b>Secret Token</b> — секретный ключ, который будет использоваться для аутентификации запросов на стороне 1С. Это значение необходимо указать в качестве <b>токена</b> в справочнике «Обработчики внешних запросов» в 1С.</li>
	<li><b>Trigger</b> — событие, которое будет вызывать веб-хук. Для работы сервиса необходимо выбрать <b>Push events</b>.</li>
</ul>
<p>После настройки GitLab будет отправлять POST-запросы на указанный URL при каждом push-событии в репозитории.</p>
</body>
</html>
