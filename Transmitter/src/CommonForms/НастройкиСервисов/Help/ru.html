<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="v8help://service_book/service_style"></link>
<title>Настройки интеграции с GitLab</title>
</head>
<body>

<h1>Настройки интеграции с GitLab</h1>
<p>Используется для задания глобальных параметров работы сервиса-распределителя (transmitter), обеспечивающего интеграцию с GitLab и информационными базами-получателями.</p>

<h2>Настройки GitLab</h2>
<p>Параметры для подключения к серверу GitLab и получения данных:</p>
<ul>
    <li><strong>Обрабатывать запрос GitLab</strong> — включает или отключает обработку входящих webhook-событий. Если флажок снят, сервис не реагирует на push-события в репозиториях.</li>
    <li><strong>Имя файла со схемой маршрутов</strong> — имя JSON-файла (по умолчанию предлагается ввести имя <code>.ext-epf.json</code>), расположенного в корне репозитория. Файл содержит правила маршрутизации: какие внешние отчёты и обработки в какие базы-получатели загружать при каждом push-событии.</li>
    <li><strong>Токен</strong> — <em>Personal Access Token</em> пользователя GitLab. Используется для аутентификации при обращении к API GitLab для загрузки схемы маршрутов и файлов <code>*.epf</code>, <code>*.erf</code>.
        <br><strong>Как получить токен:</strong> в GitLab откройте <em>User Settings → Access Tokens</em>, создайте новый токен с правами (scopes) <code>api</code>.
    </li>
    <li><strong>Таймаут соединения, сек</strong> — максимальное время ожидания ответа от GitLab. Если указано <code>0</code>, таймаут не используется.</li>
</ul>

<h2>Информационные базы-получатели</h2>
<p>Задаются параметры по умолчанию для подключения к HTTP-сервисам баз-получателей внешних обработок. Эти значения можно переопределить для каждого получателя в справочнике <a href="Catalog.Получатели.Form.ListForm/Help">Получатели</a>.</p>
<ul>
    <li><strong>Имя пользователя</strong> и <strong>Пароль</strong> — учётные данные для аутентификации на HTTP-сервисе базы-получателя. Пользователь должен иметь права на приём и сохранение файлов (например, роль <code>ЗагрузкаВнешнихОбработок</code> при использовании <a href="javascript:window.open('https://github.com/astrizhachuk/epf-endpoint','_blank');">API v2.3.0</a>).</li>
    <li><strong>Таймаут соединения, сек</strong> — максимальное время ожидания при отправке файла. Если указано <code>0</code>, таймаут не используется.</li>
</ul>

<h2>Проверка сервиса</h2>
<ul>
    <li><a href="#check">Проверить сервис...</a> — открывает окно для диагностики доступности HTTP-сервиса получателя.</li>
</ul>

<h3 id="check">Проверка внешнего сервиса</h3>
<p>При нажатии на ссылку «Проверить сервис...» открывается форма проверки статуса внешнего сервиса загрузки файлов. Поля «Имя пользователя», «Пароль» и «Таймаут» заполняются значениями по умолчанию из текущих настроек. Останется ввести адрес сервиса и нажать кнопку «Проверить».</p>
<p>Функция удобна для быстрой диагностики проблем с сетью или аутентификацией на стороне получателя.</p>

</body>
</html>
